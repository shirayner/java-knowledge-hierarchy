[TOC]



# 前言

当进行海量数据操作时，若构建二叉树，则其高度很大，降低操作速度。这是如果能允许每个节点可以有更多的数据项和子节点，则能减少树的高度，能对二叉树进行优化。



# 一、多路查找树

## 1.定义

多叉树（mutiway tree）允许每个节点可以有更多的数据项和子节点.



## 2.分类

常见的多叉树有如下几类：

> - B树
> - B+树
> - B*树





# 二、B树

B树（B-tree，Balanced tree），是一种多路自平衡查找树。



我们描述一颗B树时需要指定它的阶数，阶数表示了一个结点最多有多少个孩子结点，一般用字母m表示阶数。当m取2时，就是我们常见的二叉搜索树。



## 1.定义

一棵m阶的B-树，或为空树，或为满足下列特性的m叉树：

（1）每一个节点最多有m个子节点

（2）每一个非叶子节点（除根节点）最少有⌈m/2⌉个子节点

（3）若根节点不是叶子节点，则它至少有两个子节点

（4）所有的非终端结点中包含下列信息数据  

> (n, A~0~, K~1~, A~1~, K~2~, A~2~,..., K~n~, A~n~)
>
> - K~i~为关键字，且K~i~ < K~i+1~
> - A~i~为指向子树根节点的指针，且指针A~i-1~所指子树中所有结点的关键字均小于K~i~

（5）所有的叶子结点都在同一层

![img](images/4.JPG)



> 如图，根节点被分为3段：[0,17), (17,35), (35,∞)，也就对应其三个子节点的取值范围。
>
> 例如，查找关键字10的过程：
>
> （1）10∈[0,17)
>
> （2）10∈[8,12)
>
> （3）10==10



## 2.特性

（1）关键字集合分布在整颗树中；

（2）任何一个关键字出现且只出现在一个结点中；

（3）搜索有可能在非叶子结点结束；

（4）其搜索性能等价于在关键字全集内做一次二分查找；



## 3.适用场景

常被应用在数据库和文件系统的索引



## 4.操作



## 5.2-3树









# 三、B+树

## 1.定义

B+树是B树的变体，也是一种多路搜索树，其定义基本与B-树相同，除了：

（1）非叶子结点的子树指针与关键字个数相同；

（2）非叶子结点的子树指针P[i]，指向关键字值属于[K[i], K[i+1])的子树（B-树是开区间）；

（3）所有关键字都在叶子结点出现；

（4）所有叶子结点均有一个链指针指向下一个叶子结点；



[![这里写图片描述](images/687474703a2f2f696d672e626c6f672e6373646e2e6e65742f3230313630363132313334323231383930.jfif)](https://camo.githubusercontent.com/d4f9113dfdcee3ea41c007da2ee64d3008affb5d/687474703a2f2f696d672e626c6f672e6373646e2e6e65742f3230313630363132313334323231383930)







B+树的搜索与B树也基本相同，区别是B+树只有达到叶子结点才命中（B树可以在非叶子结点命中），其性能也等价于在关键字全集做一次二分查找；



## 2.B＋树与Ｂ树的区别

（1）所有关键字都出现在叶子结点的链表中（稠密索引），且链表中的关键字恰好是有序的；

（2）不可能在非叶子结点命中；

（3）非叶子结点相当于是叶子结点的索引（稀疏索引），叶子结点相当于是存储（关键字）数据的数据层；

（4）更适合文件索引系统。



B+的搜索与B-树也基本相同，区别是B+树只有达到叶子结点才命中（B-树可以在非叶子结点命中），其性能也等价于在关键字全集做一次二分查找；



## 3.适用场景

B+ 树通常用于**数据库和操作系统的文件系统**中。NTFS, ReiserFS, NSS, XFS, JFS, ReFS 和BFS等文件系统都在使用B+树作为**元数据索引**。B+ 树的特点是能够保持**数据稳定有序**，其插入与修改拥有较稳定的对数时间复杂度。B+ 树元素自底向上插入。



B+树更适合用来做存储索引：

> - B+树的磁盘读写代价更低
> - B+树的查询效率更加稳定
> - B+树更有利于对数据库的扫描





# 四、`B*`树

B+树的变体，在B+树的非根和非叶子结点再增加指向兄弟的指针；

![这里写图片描述](images/687474703a2f2f696d672e626c6f672e6373646e2e6e65742f3230313630363132313334373037343332.jfif)





　　` B*` 树定义了非叶子结点关键字个数至少为(2/3)*M，即块的最低使用率为2/3（代替B+树的1/2）；



`B+`树的分裂： 　　

> 当一个结点满时，分配一个新的结点，并将原结点中1/2的数据复制到新结点，最后在父结点中增加新结点的指针；B+树的分裂只影响原结点和父结点，而不会影响兄弟结点，所以它不需要指向兄弟的指针；



`B*`树的分裂：

> 当一个结点满时，如果它的下一个兄弟结点未满，那么将一部分数据移到兄弟结点中，再在原结点插入关键字，最后修改父结点中兄弟结点的关键字（因为兄弟结点的关键字范围改变了）；如果兄弟也满了，则在原结点与兄弟结点之间增加新结点，并各复制1/3的数据到新结点，最后在父结点增加新结点的指针；

所以，B*树分配新结点的概率比B+树要低，**空间使用率更高**；











# 参考资料

1. [B树、B-树、B+树、B*树之间的关系](https://blog.csdn.net/u013411246/article/details/81088914)
2. [**[数据结构] B(B-)树、B+树、B树.md**]([https://github.com/Mr-YangCheng/ForAndroidInterview/blob/master/data%20structure/%5B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%5D%20B(B-)%E6%A0%91%E3%80%81B%2B%E6%A0%91%E3%80%81B%E6%A0%91.md](https://github.com/Mr-YangCheng/ForAndroidInterview/blob/master/data structure/[数据结构] B(B-)树、B%2B树、B树.md))
3. [浅析三种多路搜索树](https://blog.csdn.net/bit_clearoff/article/details/53197436)
4. [b树和b+树的区别](b树和b+树的区别)



